# Database password (used by both PostgreSQL and the app)
# IMPORTANT: Change this to a secure password before deploying!
POSTGRES_PASSWORD=change-this-to-a-secure-password

# NextAuth.js secret - REQUIRED
# Generate with: openssl rand -base64 32
NEXTAUTH_SECRET=generate-a-new-secret-here

# NextAuth URL - set to your server's EXTERNAL URL
# This must match the URL users access in their browser
# Access is via port 4545 (HTTP)
NEXTAUTH_URL=http://172.16.20.50:4545

# Anthropic API Key for AI-powered feedback clarification
# Get your key at: https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-your-key-here

# GitHub API Token for feedback issue creation (Octokit REST API)
# NOTE: Named GITHUB_API_TOKEN (not GITHUB_TOKEN) to avoid conflicts with gh CLI auth
# Get via: gh auth token (if gh CLI authenticated)
# Or create at: https://github.com/settings/tokens
GITHUB_API_TOKEN=ghp_your-token-here

# GitHub Webhook Secret for verifying webhook signatures
# Generate with: openssl rand -hex 32
# Configure in GitHub repo Settings > Webhooks
# Webhook URL: https://your-domain/api/webhooks/github
# Content type: application/json
# Events: Issues
GITHUB_WEBHOOK_SECRET=your-webhook-secret-here

# Claude Code CLI path (optional, defaults to 'claude' in PATH)
# Set this if claude is installed in a non-standard location
# CLAUDE_CODE_PATH=/home/user/.local/bin/claude

# Cron Job Secret - Required for /api/cron/alerts endpoint
# Generate with: openssl rand -base64 32
# Used to authenticate scheduled job requests
CRON_SECRET=your-cron-secret-here-min-16-chars

# Email Configuration for Low-Stock Alerts
# Uses Resend (recommended for serverless)
# Get your key at: https://resend.com/api-keys
RESEND_API_KEY=re_your-key-here

# Email sender address (optional, defaults to alerts@example.com)
# Note: For Resend, you must verify your domain first
# EMAIL_FROM=alerts@yourcompany.com

# ============================================================================
# MICROSOFT GRAPH API (Email Reply Monitoring)
# ============================================================================
# Azure AD Application credentials for reading feedback inbox
# Email: ai-coder@vital-enterprises.com
# Configuration PENDING - feature is stubbed until configured

# Azure AD Tenant ID
AZURE_TENANT_ID=your-tenant-id

# Azure AD Application (Client) ID
AZURE_CLIENT_ID=your-client-id

# Azure AD Client Secret
AZURE_CLIENT_SECRET=your-client-secret

# Feedback email address to monitor for replies
FEEDBACK_EMAIL=ai-coder@vital-enterprises.com

# ============================================================================
# AMAZON ADS INTEGRATION (V2)
# ============================================================================
# Amazon Developer account credentials for Amazon Ads API
# Register at: https://advertising.amazon.com/API/docs/en-us/setting-up/overview

# Amazon Ads OAuth Client ID
AMAZON_ADS_CLIENT_ID=amzn1.application-oa2-client.your-client-id

# Amazon Ads OAuth Client Secret
AMAZON_ADS_CLIENT_SECRET=your-client-secret

# Amazon Ads OAuth Redirect URI (must match registered URI exactly)
AMAZON_ADS_REDIRECT_URI=http://172.16.20.50:4545/api/integrations/amazon-ads/callback

# ============================================================================
# AMAZON SP-API INTEGRATION (Selling Partner API)
# ============================================================================
# Amazon Selling Partner API credentials for sales and orders data
# Register app at: https://sellercentral.amazon.com/apps/develop/

# Amazon SP-API OAuth Client ID (LWA)
AMAZON_SP_CLIENT_ID=amzn1.application-oa2-client.your-client-id

# Amazon SP-API OAuth Client Secret (LWA)
AMAZON_SP_CLIENT_SECRET=your-client-secret

# Amazon SP-API OAuth Redirect URI (must match registered URI exactly)
AMAZON_SP_REDIRECT_URI=http://172.16.20.50:4545/api/integrations/amazon-sp/callback

# AWS IAM Credentials for SP-API request signing (required)
# Create IAM user with AmazonSpApiSeller policy
AWS_ACCESS_KEY_ID=AKIA...
AWS_SECRET_ACCESS_KEY=your-secret-key

# ============================================================================
# CREDENTIAL ENCRYPTION (V2)
# ============================================================================
# 32-byte hex key for AES-256-GCM encryption of stored credentials
# Generate with: openssl rand -hex 32
# IMPORTANT: Keep this secret! Loss of key = loss of encrypted credentials
CREDENTIAL_ENCRYPTION_KEY=generate-a-32-byte-hex-key-here-use-openssl-rand

# ============================================================================
# AMAZON SYNC SCHEDULER CONFIGURATION
# ============================================================================
# Configuration for automated daily Amazon data sync (orders, ads, reports)

# Timezone for sync scheduling (default: America/New_York)
# Used to determine when 5 AM occurs for the cron schedule
SYNC_TIMEZONE=America/New_York

# Disable all Amazon sync jobs (default: false)
# Set to 'true' to pause syncing without removing configuration
DISABLE_AMAZON_SYNC=false

# Skip sync on weekends (Saturday/Sunday) (default: false)
# Useful if Amazon data is not updated on weekends
SKIP_WEEKENDS=false

# Delay between syncing multiple credentials (ms, default: 5000)
# Helps avoid rate limiting when multiple accounts are configured
SYNC_STAGGER_MS=5000

# Maximum retry attempts for failed syncs (default: 3)
SYNC_MAX_RETRIES=3

# ============================================================================
# TEST ENVIRONMENT CONFIGURATION
# ============================================================================
# These variables are used when running against the test database.
# Test environment runs on ports 2345 (web) and 2346 (database).
#
# The test environment is used by orchestrate3 agent workflows to ensure
# production data is never modified during automated development cycles.
#
# Start test environment: cd docker && docker compose -f docker-compose.test.yml up -d
# Access test app: http://172.16.20.50:2345

# Test Database URL
# Used by test containers and orchestrate3 workflow
TEST_DATABASE_URL=postgresql://inventory_test:inventory_test_2025@localhost:2346/inventory_test

# Test NextAuth URL (for test app container)
TEST_NEXTAUTH_URL=http://172.16.20.50:2345

# ============================================================================
# LOCAL PHOTO STORAGE
# ============================================================================
# Directory for storing uploaded photos (relative to project root)
# Default: public/uploads/photos (served by Next.js)
# PHOTO_STORAGE_PATH=public/uploads/photos

# ============================================================================
# DOCKER HEALTH MONITORING
# ============================================================================
# Comma-separated list of container names to monitor
# Default: inventory-app,inventory-db-prod (production)
# Test: inventory-app-test,inventory-db-test
DOCKER_MONITOR_CONTAINERS=inventory-app,inventory-db-prod,inventory-nginx
