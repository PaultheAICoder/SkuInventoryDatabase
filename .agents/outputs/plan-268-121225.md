# Implementation Plan
**Generated**: 2025-12-12T19:30:00Z
**Generated By**: Scout-and-Plan Agent (combined workflow)
**Task ID**: GitHub Issue #268 (T066)
**Estimated Build Time**: 0.5 hours
**Complexity**: Low

## Investigation Summary

### Request Analysis
**Type**: Feature
**Source**: GitHub Issue #268
**Priority**: Medium

### Task Classification
**Category**: NEW_FEATURE
**Test Strategy**: FAST_PATH (Smoke tests only)
**Suggested Filter**: None (manual UI verification recommended)

### Issue Validation
**Status**: Valid
**Recent Changes**: Layout file has been actively maintained with recent commits for integrations, chatbot, and session loading state fixes.

### Current State Assessment
- **NotificationBanner Component**: EXISTS at `src/components/notifications/notification-banner.tsx`
  - Fully implemented with bell icon, unread count badge, popover functionality
  - Uses existing `/api/notifications` and `/api/notifications/[id]` endpoints
  - Auto-refreshes every 60 seconds
  - Handles mark as read, dismiss, and mark all read actions
- **API Endpoints**: EXIST and are fully functional
  - `GET /api/notifications` - List notifications with filtering
  - `POST /api/notifications` - Mark all read action
  - `PATCH /api/notifications/[id]` - Mark read or dismiss individual notifications
- **Notifications Service**: EXISTS at `src/services/notifications.ts`
- **Dashboard Layout**: EXISTS at `src/app/(dashboard)/layout.tsx`
  - Already has header with ChatbotButton and FeedbackButton
  - Uses 'use client' directive (compatible with NotificationBanner)

### Dependencies & Blockers
None identified. All required infrastructure is already in place.

**Can Proceed?**: YES

### Complexity Assessment
**Complexity**: Simple
**Effort**: 0.5 hours
**Risk**: Low

### Patterns Identified
**Primary**: `src/app/(dashboard)/layout.tsx` lines 30-34, 158-159
- Import pattern: `import { ComponentName } from '@/components/features/ComponentName'`
- Usage pattern: `<ComponentName onClick={() => setStateOpen(true)} />`
- Note: NotificationBanner does NOT require onClick prop - it manages its own popover state

**Secondary**: `src/components/notifications/notification-banner.tsx`
- Self-contained component with internal state management
- No props required - fetches notifications via API internally

### Ripple Effect Analysis
**Files Identified**: 1
- `/home/pbrown/SkuInventory/src/app/(dashboard)/layout.tsx` - Add import and JSX element

No other files affected. The NotificationBanner component is self-contained.

---

## Executive Summary
Add the existing NotificationBanner component to the dashboard header by importing it and placing it alongside the existing ChatbotButton and FeedbackButton. The component is already fully implemented and requires no modification - only integration into the layout.

## Phase 1: Layout Integration

### Subtask 1.1: Add NotificationBanner Import
**File**: `/home/pbrown/SkuInventory/src/app/(dashboard)/layout.tsx`
**Pattern**: Follow existing import at line 30-34
**Instructions**:
1. Add import statement for NotificationBanner after line 34:
   ```typescript
   import { NotificationBanner } from '@/components/notifications/notification-banner'
   ```

**Completion Criteria**:
- [ ] Import statement added
- [ ] No TypeScript errors

### Subtask 1.2: Add NotificationBanner to Header
**File**: `/home/pbrown/SkuInventory/src/app/(dashboard)/layout.tsx`
**Pattern**: Follow existing header buttons at lines 157-160
**Instructions**:
1. Locate the header button section (line 157-160):
   ```tsx
   <div className="flex items-center gap-2">
     <ChatbotButton onClick={() => setChatbotOpen(true)} />
     <FeedbackButton onClick={() => setFeedbackOpen(true)} />
   </div>
   ```
2. Add NotificationBanner BEFORE ChatbotButton (notification alerts should be prominent):
   ```tsx
   <div className="flex items-center gap-2">
     <NotificationBanner />
     <ChatbotButton onClick={() => setChatbotOpen(true)} />
     <FeedbackButton onClick={() => setFeedbackOpen(true)} />
   </div>
   ```

**Rationale**: Placing NotificationBanner first (leftmost) follows common UI patterns where notifications/alerts are given visual priority. The bell icon with unread count badge will be immediately visible.

**Completion Criteria**:
- [ ] NotificationBanner component added to header
- [ ] Component visible on all screen sizes (no lg:hidden classes)
- [ ] Proper alignment with existing buttons

## Phase 2: Validation

### Subtask 2.1: Build and Lint Verification
**Instructions**:
1. Run TypeScript check:
   ```bash
   npx tsc --noEmit
   ```
2. Run build:
   ```bash
   npm run build
   ```
3. Run lint:
   ```bash
   npm run lint
   ```

**Completion Criteria**:
- [ ] TypeScript check passes with no errors
- [ ] Build completes successfully
- [ ] Lint passes with no warnings

### Subtask 2.2: Manual UI Verification (Acceptance Criteria)
**Test URL**: http://172.16.20.50:2345
**Instructions**:
1. Navigate to dashboard (any page under dashboard layout)
2. Verify bell icon is visible in header
3. Verify bell icon is visible on:
   - Desktop (1024px+)
   - Tablet (768px-1023px)
   - Mobile (<768px)
4. If notifications exist, verify unread count badge displays
5. Click bell icon and verify popover opens
6. Test mark as read functionality (if notifications exist)
7. Test dismiss functionality (if notifications exist)

**Completion Criteria**:
- [ ] Bell icon visible in dashboard header
- [ ] Bell icon visible on ALL device sizes
- [ ] Unread count badge displays when notifications exist
- [ ] Clicking bell opens notification popover
- [ ] Mark as read functionality works
- [ ] Dismiss functionality works

---

## Summary of Deliverables
**Files Created**: 0
**Files Modified**: 1
- `/home/pbrown/SkuInventory/src/app/(dashboard)/layout.tsx` - Add import and JSX element

## Handoff to Build Agent
1. Execute Subtask 1.1 (add import)
2. Execute Subtask 1.2 (add component to header)
3. Execute Subtask 2.1 (build/lint verification)
4. Subtask 2.2 is manual verification for user

## Code Snippets for Build Agent

### Import to Add (after line 34):
```typescript
import { NotificationBanner } from '@/components/notifications/notification-banner'
```

### Header Section Change (lines 157-160 become):
```tsx
<div className="flex items-center gap-2">
  <NotificationBanner />
  <ChatbotButton onClick={() => setChatbotOpen(true)} />
  <FeedbackButton onClick={() => setFeedbackOpen(true)} />
</div>
```

## Test Strategy Note
- FAST_PATH: No automated tests required
- Manual UI verification recommended after build
- All API endpoints and component logic already tested as part of Phase 9 (issue #267 and prior)

## Performance Metrics
| Phase | Duration |
|-------|----------|
| Investigation | 3m |
| Validation | 1m |
| Planning | 2m |
| **Total** | **6m** |
