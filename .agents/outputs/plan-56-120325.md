# Implementation Plan
**Generated**: 2025-12-03T16:30:00Z
**Generated By**: Scout-and-Plan Agent (combined workflow)
**Task ID**: Issue #56 - Fix remaining hydration warnings from locale-dependent formatting
**Estimated Build Time**: 3-4 hours
**Complexity**: Low

## Investigation Summary

### Request Analysis
**Type**: Enhancement / Bug Fix
**Source**: GitHub Issue #56 (follow-up to Issue #33)
**Priority**: Medium

### Task Classification
**Category**: REFACTORING
**Test Strategy**: FAST_PATH (smoke tests only, <2 min)
**Suggested Filter**: None - changes are attribute additions only, no logic changes

### Issue Validation
**Status**: Valid
**Recent Changes**: Issue #33 fixed 6 instances in 3 files on commit b7cfeb6 (2025-12-03)
**Files Already Fixed (skip these)**:
- `src/app/(dashboard)/page.tsx` - 2 instances fixed
- `src/components/features/CriticalComponentsList.tsx` - 3 instances fixed
- `src/components/features/TopBuildableSkusList.tsx` - 1 instance fixed

### Current State Assessment
**Total instances found via grep**: 44 (including 6 already fixed)
**Instances requiring fix**: 38 (NOT 41 as stated in issue - see verification below)

**Files from issue requiring attention (14 files, 41 instances claimed)**:
| File | Claimed | Actual | Status |
|------|---------|--------|--------|
| `/src/app/(dashboard)/transactions/page.tsx` | 2 | 2 | Needs fix |
| `/src/app/(dashboard)/components/[id]/page.tsx` | 6 | 6 | Needs fix |
| `/src/app/(dashboard)/skus/[id]/page.tsx` | 4 | 4 | Needs fix |
| `/src/components/features/TransactionDetail.tsx` | 4 | 4 | Needs fix |
| `/src/components/features/BuildDialog.tsx` | 5 | 5 | Needs fix |
| `/src/components/features/UserTable.tsx` | 1 | 1 | Needs fix |
| `/src/components/features/ComponentTable.tsx` | 1 | 1 | Needs fix |
| `/src/components/features/BuildableUnitsDisplay.tsx` | 1 | 1 | Needs fix |
| `/src/components/features/BOMVersionList.tsx` | 2 | 2 | Needs fix |
| `/src/components/features/InsufficientInventoryWarning.tsx` | 5 | 5 | Needs fix |
| `/src/components/features/DefectAnalyticsSummary.tsx` | 4 | 4 | Needs fix |
| `/src/components/features/SKUTable.tsx` | 1 | 1 | Needs fix |
| `/src/components/ui/BuildFooter.tsx` | 1 | 0 | **Skip** - uses explicit 'en-US' locale |
| `/src/components/features/DefectTrendChart.tsx` | 3 | 0 | **Skip** - uses explicit 'en-US' locale |

**Additional file found (NOT in issue)**:
| File | Instances | Status |
|------|-----------|--------|
| `/src/components/features/ComponentSparkline.tsx` | 2 | Needs fix |

**Corrected Total**: 38 instances in 13 files (excluding 4 instances in 2 files using explicit 'en-US')

### Dependencies & Blockers
None - this is a straightforward attribute addition task.

**Can Proceed?**: YES

### Complexity Assessment
**Complexity**: Simple
**Effort**: 3-4 hours
**Risk**: Low - adding `suppressHydrationWarning` attribute does not change any logic

### Patterns Identified
**Primary**: `src/app/(dashboard)/page.tsx:142` - TableCell with suppressHydrationWarning
```tsx
<TableCell className="font-mono text-sm" suppressHydrationWarning>
  {new Date(tx.date).toLocaleDateString()}
</TableCell>
```

**Secondary**: `src/components/features/CriticalComponentsList.tsx:112-119` - span with suppressHydrationWarning
```tsx
<span className={...} suppressHydrationWarning>
  {value.toLocaleString()}
</span>
```

### Ripple Effect Analysis
**Files Identified**: 13 files
- No ripple effects - adding `suppressHydrationWarning` is an isolated attribute change
- No type changes required
- No API changes required
- No test changes required (existing tests remain valid)

---

## Executive Summary
Add `suppressHydrationWarning` attribute to 38 JSX elements across 13 files that use `.toLocaleDateString()` or `.toLocaleString()` methods. This prevents React hydration warnings when server and client locales differ. The fix follows the exact pattern established in Issue #33.

## Phase 1: Pages Layer (3 files, 12 instances)

### Subtask 1.1: Fix transactions/page.tsx
**File**: `/home/pbrown/SkuInventory/src/app/(dashboard)/transactions/page.tsx`
**Pattern**: Follow `src/app/(dashboard)/page.tsx:142`
**Instances**: 2
**Line Numbers**: 293-294, 305-314

**Instructions**:
1. Line 293: Add `suppressHydrationWarning` to the TableCell containing `toLocaleDateString()`:
```tsx
// Before (line 293):
<TableCell className="font-mono text-sm">

// After:
<TableCell className="font-mono text-sm" suppressHydrationWarning>
```

2. Line 305-311: Add `suppressHydrationWarning` to the span containing `toLocaleString()`:
```tsx
// Before (lines 305-314):
<span
  className={`ml-1 font-mono ${
    parseFloat(line.quantityChange) >= 0
      ? 'text-green-600'
      : 'text-red-600'
  }`}
>

// After:
<span
  className={`ml-1 font-mono ${
    parseFloat(line.quantityChange) >= 0
      ? 'text-green-600'
      : 'text-red-600'
  }`}
  suppressHydrationWarning
>
```

**Validation**:
```bash
npx tsc --noEmit
npm run build
```

**Completion Criteria**:
- [ ] TableCell on line ~293 has suppressHydrationWarning
- [ ] span on lines ~305-311 has suppressHydrationWarning
- [ ] TypeScript compiles without errors
- [ ] Build succeeds

### Subtask 1.2: Fix components/[id]/page.tsx
**File**: `/home/pbrown/SkuInventory/src/app/(dashboard)/components/[id]/page.tsx`
**Pattern**: Follow issue #33 pattern
**Instances**: 6
**Line Numbers**: 155, 197-200, 261-263, 306-308, 337, 344-346

**Instructions**:
1. Line 155: Add `suppressHydrationWarning` to the p element:
```tsx
// Before:
<p className="text-3xl font-bold">{component.quantityOnHand.toLocaleString()}</p>

// After:
<p className="text-3xl font-bold" suppressHydrationWarning>{component.quantityOnHand.toLocaleString()}</p>
```

2. Line 197-200: Add `suppressHydrationWarning` to the p element (inside toLocaleString with options):
```tsx
// Before:
<p className="text-lg font-medium">
  $
  {(component.quantityOnHand * parseFloat(component.costPerUnit)).toLocaleString(
    undefined,
    { minimumFractionDigits: 2, maximumFractionDigits: 2 }
  )}
</p>

// After:
<p className="text-lg font-medium" suppressHydrationWarning>
  $
  {(component.quantityOnHand * parseFloat(component.costPerUnit)).toLocaleString(
    undefined,
    { minimumFractionDigits: 2, maximumFractionDigits: 2 }
  )}
</p>
```

3. Line 261-263: Add `suppressHydrationWarning` to the span:
```tsx
// Before:
<span className={sku.maxBuildableUnits === 0 ? 'text-red-600' : ''}>
  {sku.maxBuildableUnits.toLocaleString()}
</span>

// After:
<span className={sku.maxBuildableUnits === 0 ? 'text-red-600' : ''} suppressHydrationWarning>
  {sku.maxBuildableUnits.toLocaleString()}
</span>
```

4. Line 306-308: Add `suppressHydrationWarning` to the span in constrainedSkus section:
```tsx
// Before:
<span className={sku.maxBuildableUnits === 0 ? 'text-red-600' : 'text-yellow-700'}>
  {sku.maxBuildableUnits.toLocaleString()}
</span>

// After:
<span className={sku.maxBuildableUnits === 0 ? 'text-red-600' : 'text-yellow-700'} suppressHydrationWarning>
  {sku.maxBuildableUnits.toLocaleString()}
</span>
```

5. Line 337: Add `suppressHydrationWarning` to the TableCell:
```tsx
// Before:
<TableCell>{new Date(tx.date).toLocaleDateString()}</TableCell>

// After:
<TableCell suppressHydrationWarning>{new Date(tx.date).toLocaleDateString()}</TableCell>
```

6. Line 339-346: Add `suppressHydrationWarning` to the TableCell with quantityChange:
```tsx
// Before:
<TableCell
  className={`text-right font-mono ${
    parseFloat(tx.quantityChange) >= 0 ? 'text-green-600' : 'text-red-600'
  }`}
>

// After:
<TableCell
  className={`text-right font-mono ${
    parseFloat(tx.quantityChange) >= 0 ? 'text-green-600' : 'text-red-600'
  }`}
  suppressHydrationWarning
>
```

**Validation**:
```bash
npx tsc --noEmit
npm run build
```

**Completion Criteria**:
- [ ] All 6 instances have suppressHydrationWarning
- [ ] TypeScript compiles without errors
- [ ] Build succeeds

### Subtask 1.3: Fix skus/[id]/page.tsx
**File**: `/home/pbrown/SkuInventory/src/app/(dashboard)/skus/[id]/page.tsx`
**Pattern**: Follow issue #33 pattern
**Instances**: 4
**Line Numbers**: 202, 203, 239, 246

**Instructions**:
1. Lines 201-204: Add `suppressHydrationWarning` to both p elements in the text-xs div:
```tsx
// Before:
<div className="text-xs text-muted-foreground pt-4 border-t">
  <p>Created: {new Date(sku.createdAt).toLocaleDateString()}</p>
  <p>Updated: {new Date(sku.updatedAt).toLocaleDateString()}</p>
</div>

// After:
<div className="text-xs text-muted-foreground pt-4 border-t">
  <p suppressHydrationWarning>Created: {new Date(sku.createdAt).toLocaleDateString()}</p>
  <p suppressHydrationWarning>Updated: {new Date(sku.updatedAt).toLocaleDateString()}</p>
</div>
```

2. Line 239: Add `suppressHydrationWarning` to TableCell:
```tsx
// Before:
<TableCell>{new Date(tx.date).toLocaleDateString()}</TableCell>

// After:
<TableCell suppressHydrationWarning>{new Date(tx.date).toLocaleDateString()}</TableCell>
```

3. Line 245-246: Add `suppressHydrationWarning` to TableCell:
```tsx
// Before:
<TableCell className="text-right font-mono text-green-600">
  {tx.unitsBuild !== null ? `+${tx.unitsBuild.toLocaleString()}` : '-'}
</TableCell>

// After:
<TableCell className="text-right font-mono text-green-600" suppressHydrationWarning>
  {tx.unitsBuild !== null ? `+${tx.unitsBuild.toLocaleString()}` : '-'}
</TableCell>
```

**Validation**:
```bash
npx tsc --noEmit
npm run build
```

**Completion Criteria**:
- [ ] All 4 instances have suppressHydrationWarning
- [ ] TypeScript compiles without errors
- [ ] Build succeeds

---

## Phase 2: Feature Components (10 files, 26 instances)

### Subtask 2.1: Fix TransactionDetail.tsx
**File**: `/home/pbrown/SkuInventory/src/components/features/TransactionDetail.tsx`
**Instances**: 4
**Line Numbers**: 106, 132, 220, 273-278

**Instructions**:
1. Line 106: Add `suppressHydrationWarning` to p element:
```tsx
// Before:
<p>{new Date(transaction.date).toLocaleDateString()}</p>

// After:
<p suppressHydrationWarning>{new Date(transaction.date).toLocaleDateString()}</p>
```

2. Line 132: Add `suppressHydrationWarning` to p element:
```tsx
// Before:
<p className="text-2xl font-bold">{transaction.unitsBuild?.toLocaleString()}</p>

// After:
<p className="text-2xl font-bold" suppressHydrationWarning>{transaction.unitsBuild?.toLocaleString()}</p>
```

3. Line 219-220: Add `suppressHydrationWarning` to p element:
```tsx
// Before:
<p className="text-xs text-muted-foreground">
  {new Date(transaction.createdAt).toLocaleString()}
</p>

// After:
<p className="text-xs text-muted-foreground" suppressHydrationWarning>
  {new Date(transaction.createdAt).toLocaleString()}
</p>
```

4. Line 273-278: Add `suppressHydrationWarning` to span element:
```tsx
// Before:
<span
  className={`font-mono ${qtyChange >= 0 ? 'text-green-600' : 'text-red-600'}`}
>
  {qtyChange >= 0 ? '+' : ''}
  {qtyChange.toLocaleString()}
</span>

// After:
<span
  className={`font-mono ${qtyChange >= 0 ? 'text-green-600' : 'text-red-600'}`}
  suppressHydrationWarning
>
  {qtyChange >= 0 ? '+' : ''}
  {qtyChange.toLocaleString()}
</span>
```

**Validation**:
```bash
npx tsc --noEmit
npm run build
```

**Completion Criteria**:
- [ ] All 4 instances have suppressHydrationWarning
- [ ] TypeScript compiles without errors
- [ ] Build succeeds

### Subtask 2.2: Fix BuildDialog.tsx
**File**: `/home/pbrown/SkuInventory/src/components/features/BuildDialog.tsx`
**Instances**: 5
**Line Numbers**: 209-211, 272, 281, 307

**Instructions**:
1. Lines 207-212: Add `suppressHydrationWarning` to li element (contains 3 toLocaleString calls):
```tsx
// Before:
<li key={item.componentId}>
  <span className="font-medium">{item.componentName}</span>:{' '}
  Need {item.required.toLocaleString()}, have {item.available.toLocaleString()}{' '}
  (short {item.shortage.toLocaleString()})
</li>

// After:
<li key={item.componentId} suppressHydrationWarning>
  <span className="font-medium">{item.componentName}</span>:{' '}
  Need {item.required.toLocaleString()}, have {item.available.toLocaleString()}{' '}
  (short {item.shortage.toLocaleString()})
</li>
```

2. Line 271-273: Add `suppressHydrationWarning` to span element:
```tsx
// Before:
<span className="text-xs text-muted-foreground">
  ({sku.maxBuildableUnits?.toLocaleString() ?? '0'} buildable)
</span>

// After:
<span className="text-xs text-muted-foreground" suppressHydrationWarning>
  ({sku.maxBuildableUnits?.toLocaleString() ?? '0'} buildable)
</span>
```

3. Line 280-281: Add `suppressHydrationWarning` to p element:
```tsx
// Before:
<p className="text-xs text-muted-foreground mt-1">
  Max buildable: {selectedSku.maxBuildableUnits?.toLocaleString() ?? '0'} units
</p>

// After:
<p className="text-xs text-muted-foreground mt-1" suppressHydrationWarning>
  Max buildable: {selectedSku.maxBuildableUnits?.toLocaleString() ?? '0'} units
</p>
```

4. Line 306-307: Add `suppressHydrationWarning` to p element:
```tsx
// Before:
<p className="text-xs text-yellow-600 mt-1">
  Exceeds max buildable units ({selectedSku?.maxBuildableUnits?.toLocaleString()})
</p>

// After:
<p className="text-xs text-yellow-600 mt-1" suppressHydrationWarning>
  Exceeds max buildable units ({selectedSku?.maxBuildableUnits?.toLocaleString()})
</p>
```

**Validation**:
```bash
npx tsc --noEmit
npm run build
```

**Completion Criteria**:
- [ ] All 5 locations have suppressHydrationWarning
- [ ] TypeScript compiles without errors
- [ ] Build succeeds

### Subtask 2.3: Fix UserTable.tsx
**File**: `/home/pbrown/SkuInventory/src/components/features/UserTable.tsx`
**Instances**: 1
**Line Numbers**: 136-139

**Instructions**:
1. Line 136: Add `suppressHydrationWarning` to TableCell:
```tsx
// Before:
<TableCell className="text-muted-foreground">
  {user.lastLoginAt
    ? new Date(user.lastLoginAt).toLocaleDateString()
    : 'Never'}
</TableCell>

// After:
<TableCell className="text-muted-foreground" suppressHydrationWarning>
  {user.lastLoginAt
    ? new Date(user.lastLoginAt).toLocaleDateString()
    : 'Never'}
</TableCell>
```

**Validation**:
```bash
npx tsc --noEmit
npm run build
```

**Completion Criteria**:
- [ ] TableCell has suppressHydrationWarning
- [ ] TypeScript compiles without errors
- [ ] Build succeeds

### Subtask 2.4: Fix ComponentTable.tsx
**File**: `/home/pbrown/SkuInventory/src/components/features/ComponentTable.tsx`
**Instances**: 1
**Line Numbers**: 219-220

**Instructions**:
1. Line 219: Add `suppressHydrationWarning` to TableCell:
```tsx
// Before:
<TableCell className="text-right font-mono">
  {component.quantityOnHand.toLocaleString()}
</TableCell>

// After:
<TableCell className="text-right font-mono" suppressHydrationWarning>
  {component.quantityOnHand.toLocaleString()}
</TableCell>
```

**Validation**:
```bash
npx tsc --noEmit
npm run build
```

**Completion Criteria**:
- [ ] TableCell has suppressHydrationWarning
- [ ] TypeScript compiles without errors
- [ ] Build succeeds

### Subtask 2.5: Fix BuildableUnitsDisplay.tsx
**File**: `/home/pbrown/SkuInventory/src/components/features/BuildableUnitsDisplay.tsx`
**Instances**: 1
**Line Numbers**: 36-42

**Instructions**:
1. Line 36-41: Add `suppressHydrationWarning` to span element:
```tsx
// Before:
<span
  className={`font-mono font-medium ${sizeClasses[size]} ${
    isZero ? 'text-red-600' : isLow ? 'text-yellow-600' : ''
  }`}
>
  {maxBuildableUnits.toLocaleString()}
</span>

// After:
<span
  className={`font-mono font-medium ${sizeClasses[size]} ${
    isZero ? 'text-red-600' : isLow ? 'text-yellow-600' : ''
  }`}
  suppressHydrationWarning
>
  {maxBuildableUnits.toLocaleString()}
</span>
```

**Validation**:
```bash
npx tsc --noEmit
npm run build
```

**Completion Criteria**:
- [ ] span has suppressHydrationWarning
- [ ] TypeScript compiles without errors
- [ ] Build succeeds

### Subtask 2.6: Fix BOMVersionList.tsx
**File**: `/home/pbrown/SkuInventory/src/components/features/BOMVersionList.tsx`
**Instances**: 2
**Line Numbers**: 211-212, 220-221

**Instructions**:
1. Line 211-212: Add `suppressHydrationWarning` to TableCell:
```tsx
// Before:
<TableCell className="text-right font-mono">
  {parseFloat(line.quantityPerUnit).toLocaleString()}
</TableCell>

// After:
<TableCell className="text-right font-mono" suppressHydrationWarning>
  {parseFloat(line.quantityPerUnit).toLocaleString()}
</TableCell>
```

2. Line 220-221: Add `suppressHydrationWarning` to TableCell:
```tsx
// Before:
<TableCell className="text-right font-mono">
  {line.component.quantityOnHand?.toLocaleString() ?? '-'}
</TableCell>

// After:
<TableCell className="text-right font-mono" suppressHydrationWarning>
  {line.component.quantityOnHand?.toLocaleString() ?? '-'}
</TableCell>
```

**Validation**:
```bash
npx tsc --noEmit
npm run build
```

**Completion Criteria**:
- [ ] Both TableCells have suppressHydrationWarning
- [ ] TypeScript compiles without errors
- [ ] Build succeeds

### Subtask 2.7: Fix InsufficientInventoryWarning.tsx
**File**: `/home/pbrown/SkuInventory/src/components/features/InsufficientInventoryWarning.tsx`
**Instances**: 5
**Line Numbers**: 41-44, 64, 91-92, 94-95, 97-98

**Instructions**:
1. Line 41-44: Add `suppressHydrationWarning` to li element (compact view):
```tsx
// Before:
<li key={item.componentId}>
  {item.componentName}: short {item.shortage.toLocaleString()}
</li>

// After:
<li key={item.componentId} suppressHydrationWarning>
  {item.componentName}: short {item.shortage.toLocaleString()}
</li>
```

2. Line 64: Add `suppressHydrationWarning` to CardDescription (contains toLocaleString):
```tsx
// Before:
<CardDescription>
  Cannot build {unitsToBuild.toLocaleString()} unit{unitsToBuild !== 1 ? 's' : ''}
  {skuName && <> of <span className="font-medium">{skuName}</span></>} due to component
  shortages
</CardDescription>

// After:
<CardDescription>
  <span suppressHydrationWarning>Cannot build {unitsToBuild.toLocaleString()} unit{unitsToBuild !== 1 ? 's' : ''}</span>
  {skuName && <> of <span className="font-medium">{skuName}</span></>} due to component
  shortages
</CardDescription>
```

Note: For line 64, wrap only the part with toLocaleString in a span with suppressHydrationWarning.

3. Line 91-92: Add `suppressHydrationWarning` to TableCell:
```tsx
// Before:
<TableCell className="text-right font-mono">
  {item.required.toLocaleString()}
</TableCell>

// After:
<TableCell className="text-right font-mono" suppressHydrationWarning>
  {item.required.toLocaleString()}
</TableCell>
```

4. Line 94-95: Add `suppressHydrationWarning` to TableCell:
```tsx
// Before:
<TableCell className="text-right font-mono">
  {item.available.toLocaleString()}
</TableCell>

// After:
<TableCell className="text-right font-mono" suppressHydrationWarning>
  {item.available.toLocaleString()}
</TableCell>
```

5. Line 97-98: Add `suppressHydrationWarning` to TableCell:
```tsx
// Before:
<TableCell className="text-right font-mono text-red-600 font-medium">
  {item.shortage.toLocaleString()}
</TableCell>

// After:
<TableCell className="text-right font-mono text-red-600 font-medium" suppressHydrationWarning>
  {item.shortage.toLocaleString()}
</TableCell>
```

**Validation**:
```bash
npx tsc --noEmit
npm run build
```

**Completion Criteria**:
- [ ] All 5 locations have suppressHydrationWarning
- [ ] TypeScript compiles without errors
- [ ] Build succeeds

### Subtask 2.8: Fix DefectAnalyticsSummary.tsx
**File**: `/home/pbrown/SkuInventory/src/components/features/DefectAnalyticsSummary.tsx`
**Instances**: 4
**Line Numbers**: 18, 19-20, 32-33, 45-46

**Instructions**:
1. Line 18: Add `suppressHydrationWarning` to div element:
```tsx
// Before:
<div className="text-2xl font-bold">{summary.totalBuilds.toLocaleString()}</div>

// After:
<div className="text-2xl font-bold" suppressHydrationWarning>{summary.totalBuilds.toLocaleString()}</div>
```

2. Line 19-20: Add `suppressHydrationWarning` to p element:
```tsx
// Before:
<p className="text-xs text-muted-foreground">
  {summary.totalUnitsBuilt.toLocaleString()} units built
</p>

// After:
<p className="text-xs text-muted-foreground" suppressHydrationWarning>
  {summary.totalUnitsBuilt.toLocaleString()} units built
</p>
```

3. Line 32-33: Add `suppressHydrationWarning` to p element:
```tsx
// Before:
<p className="text-xs text-muted-foreground">
  {summary.totalDefects.toLocaleString()} total defects
</p>

// After:
<p className="text-xs text-muted-foreground" suppressHydrationWarning>
  {summary.totalDefects.toLocaleString()} total defects
</p>
```

4. Line 45-46: Add `suppressHydrationWarning` to p element:
```tsx
// Before:
<p className="text-xs text-muted-foreground">
  {summary.totalAffectedUnits.toLocaleString()} affected units
</p>

// After:
<p className="text-xs text-muted-foreground" suppressHydrationWarning>
  {summary.totalAffectedUnits.toLocaleString()} affected units
</p>
```

**Validation**:
```bash
npx tsc --noEmit
npm run build
```

**Completion Criteria**:
- [ ] All 4 elements have suppressHydrationWarning
- [ ] TypeScript compiles without errors
- [ ] Build succeeds

### Subtask 2.9: Fix SKUTable.tsx
**File**: `/home/pbrown/SkuInventory/src/components/features/SKUTable.tsx`
**Instances**: 1
**Line Numbers**: 191-194

**Instructions**:
1. Line 192-194: Add `suppressHydrationWarning` to span element:
```tsx
// Before:
<span className={sku.maxBuildableUnits === 0 ? 'text-red-600' : ''}>
  {sku.maxBuildableUnits.toLocaleString()}
</span>

// After:
<span className={sku.maxBuildableUnits === 0 ? 'text-red-600' : ''} suppressHydrationWarning>
  {sku.maxBuildableUnits.toLocaleString()}
</span>
```

**Validation**:
```bash
npx tsc --noEmit
npm run build
```

**Completion Criteria**:
- [ ] span has suppressHydrationWarning
- [ ] TypeScript compiles without errors
- [ ] Build succeeds

### Subtask 2.10: Fix ComponentSparkline.tsx (Additional file found)
**File**: `/home/pbrown/SkuInventory/src/components/features/ComponentSparkline.tsx`
**Instances**: 2
**Line Numbers**: 28-29, 31-32

**Instructions**:
1. Line 28-29: Add `suppressHydrationWarning` to p element:
```tsx
// Before:
<p className="text-xs text-muted-foreground">
  {new Date(data.date).toLocaleDateString()}
</p>

// After:
<p className="text-xs text-muted-foreground" suppressHydrationWarning>
  {new Date(data.date).toLocaleDateString()}
</p>
```

2. Line 31-32: Add `suppressHydrationWarning` to p element:
```tsx
// Before:
<p className="text-sm font-medium">
  {data.quantityOnHand.toLocaleString()} units
</p>

// After:
<p className="text-sm font-medium" suppressHydrationWarning>
  {data.quantityOnHand.toLocaleString()} units
</p>
```

**Validation**:
```bash
npx tsc --noEmit
npm run build
```

**Completion Criteria**:
- [ ] Both p elements have suppressHydrationWarning
- [ ] TypeScript compiles without errors
- [ ] Build succeeds

---

## Phase 3: Final Validation

### Subtask 3.1: Run Full Build and Type Check
**Instructions**:
```bash
npx tsc --noEmit
npm run build
npm run lint
```

**Completion Criteria**:
- [ ] TypeScript compiles without errors
- [ ] Build succeeds without errors
- [ ] Lint passes

### Subtask 3.2: Verify All Instances Fixed
**Instructions**:
Run grep to verify all non-explicit-locale instances have suppressHydrationWarning:
```bash
# Count remaining unfixed instances (should be 0 except for 'en-US' ones)
grep -r "\.toLocaleString()" --include="*.tsx" src/ | grep -v "suppressHydrationWarning" | grep -v "'en-US'"
grep -r "\.toLocaleDateString()" --include="*.tsx" src/ | grep -v "suppressHydrationWarning" | grep -v "'en-US'"
```

**Completion Criteria**:
- [ ] No instances found without suppressHydrationWarning (except 'en-US' explicit locale)

---

## Files to Skip (using explicit 'en-US' locale - no hydration issue)

1. **`/src/components/ui/BuildFooter.tsx`** (line 11)
   - Uses `date.toLocaleDateString('en-US', {...})`
   - Explicit locale prevents hydration mismatch

2. **`/src/components/features/DefectTrendChart.tsx`** (lines 26, 28, 30)
   - Uses `date.toLocaleDateString('en-US', {...})`
   - Explicit locale prevents hydration mismatch

---

## Summary of Deliverables

**Files Modified**: 13
- `/src/app/(dashboard)/transactions/page.tsx` (2 instances)
- `/src/app/(dashboard)/components/[id]/page.tsx` (6 instances)
- `/src/app/(dashboard)/skus/[id]/page.tsx` (4 instances)
- `/src/components/features/TransactionDetail.tsx` (4 instances)
- `/src/components/features/BuildDialog.tsx` (5 instances)
- `/src/components/features/UserTable.tsx` (1 instance)
- `/src/components/features/ComponentTable.tsx` (1 instance)
- `/src/components/features/BuildableUnitsDisplay.tsx` (1 instance)
- `/src/components/features/BOMVersionList.tsx` (2 instances)
- `/src/components/features/InsufficientInventoryWarning.tsx` (5 instances)
- `/src/components/features/DefectAnalyticsSummary.tsx` (4 instances)
- `/src/components/features/SKUTable.tsx` (1 instance)
- `/src/components/features/ComponentSparkline.tsx` (2 instances) **[Additional]**

**Files Created**: 0

**Files Skipped**: 2 (use explicit 'en-US' locale)
- `/src/components/ui/BuildFooter.tsx`
- `/src/components/features/DefectTrendChart.tsx`

**Total Instances Fixed**: 38

## Handoff to Build Agent

1. Execute subtasks in exact order (Phase 1 -> Phase 2 -> Phase 3)
2. For each file, add `suppressHydrationWarning` to the JSX element containing the locale-dependent formatting
3. After each file, run `npx tsc --noEmit` to verify no type errors
4. After all files, run full build validation
5. Follow reference patterns exactly - only add the attribute, do not modify any logic

## Test Strategy Note

- **Test Strategy**: FAST_PATH - no new tests needed
- This is a refactoring task that adds HTML attributes only
- Existing E2E tests from issue #33 (`tests/e2e/dashboard-hydration.spec.ts`) cover hydration verification
- No unit tests affected as no logic changes

## Edge Cases

1. **InsufficientInventoryWarning.tsx line 64**: The CardDescription contains text mixed with JSX. Wrap only the locale-formatted portion in a span with suppressHydrationWarning.

2. **BuildDialog.tsx lines 209-211**: The li element contains multiple toLocaleString calls. Adding suppressHydrationWarning to the li element covers all three.

## Performance Metrics

| Phase | Duration |
|-------|----------|
| Investigation | 15m |
| Validation | 5m |
| Planning | 10m |
| **Total** | **30m** |
