# Implementation Plan
**Generated**: 2025-12-17T16:45:00Z
**Generated By**: Scout-and-Plan Agent (combined workflow)
**Task ID**: Issue #304
**Estimated Build Time**: 1-2 hours
**Complexity**: Low

## Investigation Summary

### Request Analysis
**Type**: Enhancement
**Source**: GitHub Issue #304
**Priority**: Medium

### Task Classification
**Category**: NEW_FEATURE
**Test Strategy**: FAST_PATH (smoke tests only - simple UI component)
**Suggested Filter**: None

### Issue Validation
**Status**: Valid
**Recent Changes**: None to affected files

### Current State Assessment
- **Existing skeleton component**: `src/components/ui/skeleton.tsx` - shadcn/ui Skeleton component already installed
- **Dashboard loading pattern**: `src/app/(dashboard)/loading.tsx` - Excellent reference with table skeleton pattern
- **Current SKU page fallback**: Line 69 uses generic `<div>Loading...</div>`
- **SKUTable structure**: 7 columns (Name, Internal Code, Channel, Active BOM, Unit Cost, Buildable, FG Qty)
- **Similar pages with same issue**: `components/page.tsx`, `lots/page.tsx`, `transactions/page.tsx` also use generic loading

### Dependencies & Blockers
1. None - Skeleton component already exists, patterns are established

**Can Proceed?**: YES

### Complexity Assessment
**Complexity**: Simple
**Effort**: 1-2 hours
**Risk**: Low

### Patterns Identified
**Primary**: `/home/pbrown/SkuInventory/src/app/(dashboard)/loading.tsx` - Table skeleton pattern (lines 32-49)
**Secondary**: `/home/pbrown/SkuInventory/src/components/ui/skeleton.tsx` - Base Skeleton component

### Ripple Effect Analysis
**Files Identified**: 1
- `/home/pbrown/SkuInventory/src/app/(dashboard)/skus/page.tsx` - Update Suspense fallback (line 69)

---

## Executive Summary
Create a `SKUTableSkeleton` component that mimics the SKUTable structure with animated skeleton placeholders. This will replace the generic "Loading..." text in the SKU page's Suspense fallback, providing a better UX by showing users what content to expect while data loads. The component will include skeleton rows for the filter bar, table headers, and data rows.

## Phase 1: Create SKUTableSkeleton Component

### Subtask 1.1: Create SKUTableSkeleton Component
**File**: `/home/pbrown/SkuInventory/src/components/features/SKUTableSkeleton.tsx`
**Pattern**: Follow `/home/pbrown/SkuInventory/src/app/(dashboard)/loading.tsx` lines 32-49
**Type**: New File

**Instructions**:
1. Create a new file `SKUTableSkeleton.tsx` in the features folder
2. Import required UI components:
   - `Skeleton` from `@/components/ui/skeleton`
   - Table components (`Table`, `TableBody`, `TableCell`, `TableHead`, `TableHeader`, `TableRow`) from `@/components/ui/table`
3. Create the component structure matching SKUTable:
   - Filter bar skeleton (search input, search button, channel select, location filter)
   - Table with 7 columns matching SKUTable headers
   - 5-10 skeleton rows for realistic loading appearance
   - Optional pagination skeleton at bottom

**Component Structure**:
```tsx
import { Skeleton } from '@/components/ui/skeleton'
import {
  Table,
  TableBody,
  TableCell,
  TableHead,
  TableHeader,
  TableRow,
} from '@/components/ui/table'

export function SKUTableSkeleton() {
  return (
    <div className="space-y-4">
      {/* Filter bar skeleton */}
      <div className="flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between">
        <div className="flex gap-2">
          {/* Search input skeleton */}
          <Skeleton className="h-10 w-[250px]" />
          {/* Search button skeleton */}
          <Skeleton className="h-10 w-[70px]" />
        </div>
        <div className="flex gap-2">
          {/* Channel select skeleton */}
          <Skeleton className="h-10 w-[150px]" />
          {/* Location filter skeleton */}
          <Skeleton className="h-10 w-[150px]" />
        </div>
      </div>

      {/* Table skeleton */}
      <div className="rounded-md border">
        <Table>
          <TableHeader>
            <TableRow>
              <TableHead><Skeleton className="h-4 w-16" /></TableHead>
              <TableHead><Skeleton className="h-4 w-24" /></TableHead>
              <TableHead><Skeleton className="h-4 w-16" /></TableHead>
              <TableHead><Skeleton className="h-4 w-20" /></TableHead>
              <TableHead className="text-right"><Skeleton className="h-4 w-16 ml-auto" /></TableHead>
              <TableHead className="text-right"><Skeleton className="h-4 w-16 ml-auto" /></TableHead>
              <TableHead className="text-right"><Skeleton className="h-4 w-14 ml-auto" /></TableHead>
            </TableRow>
          </TableHeader>
          <TableBody>
            {[...Array(8)].map((_, i) => (
              <TableRow key={i}>
                <TableCell><Skeleton className="h-4 w-32" /></TableCell>
                <TableCell><Skeleton className="h-4 w-20 font-mono" /></TableCell>
                <TableCell><Skeleton className="h-6 w-16 rounded-full" /></TableCell>
                <TableCell><Skeleton className="h-4 w-12" /></TableCell>
                <TableCell className="text-right"><Skeleton className="h-4 w-14 ml-auto" /></TableCell>
                <TableCell className="text-right"><Skeleton className="h-4 w-12 ml-auto" /></TableCell>
                <TableCell className="text-right"><Skeleton className="h-4 w-10 ml-auto" /></TableCell>
              </TableRow>
            ))}
          </TableBody>
        </Table>
      </div>

      {/* Pagination skeleton */}
      <div className="flex items-center justify-between">
        <Skeleton className="h-4 w-48" />
        <div className="flex gap-2">
          <Skeleton className="h-9 w-24" />
          <Skeleton className="h-9 w-20" />
        </div>
      </div>
    </div>
  )
}
```

**Validation Commands**:
```bash
npx tsc --noEmit
npm run lint
```

**Completion Criteria**:
- [ ] File created at correct path
- [ ] TypeScript compiles without errors
- [ ] Component exports correctly
- [ ] Skeleton widths roughly match actual content widths in SKUTable

---

## Phase 2: Update SKU Page

### Subtask 2.1: Replace Loading Fallback in SKU Page
**File**: `/home/pbrown/SkuInventory/src/app/(dashboard)/skus/page.tsx`
**Line**: 69
**Type**: Modification

**Instructions**:
1. Add import for `SKUTableSkeleton` component:
   ```tsx
   import { SKUTableSkeleton } from '@/components/features/SKUTableSkeleton'
   ```
2. Replace the Suspense fallback on line 69:
   - FROM: `<Suspense fallback={<div>Loading...</div>}>`
   - TO: `<Suspense fallback={<SKUTableSkeleton />}>`

**Current Code (line 69)**:
```tsx
<Suspense fallback={<div>Loading...</div>}>
```

**Updated Code**:
```tsx
<Suspense fallback={<SKUTableSkeleton />}>
```

**Validation Commands**:
```bash
npx tsc --noEmit
npm run build
```

**Completion Criteria**:
- [ ] Import added correctly
- [ ] Suspense fallback replaced
- [ ] Build completes without errors
- [ ] No TypeScript errors

---

## Phase 3: Verification

### Subtask 3.1: Visual Verification
**Type**: Manual Testing

**Instructions**:
1. Start the development server: `npm run dev`
2. Navigate to `/skus` page
3. Use browser dev tools Network tab to throttle connection to "Slow 3G"
4. Refresh the page and observe:
   - Skeleton loader should appear immediately
   - Layout should match actual table structure (no layout shift)
   - Animation should be smooth (pulse effect)
5. Verify skeleton disappears when data loads

**Validation Commands**:
```bash
npm run dev
# Then manually test at http://172.16.20.50:4545/skus
```

**Completion Criteria**:
- [ ] Skeleton appears during loading
- [ ] Skeleton matches table layout (7 columns)
- [ ] No layout shift when data loads
- [ ] Animation is visible (pulse effect)

---

## Summary of Deliverables
**Files Created**: 1
- `/home/pbrown/SkuInventory/src/components/features/SKUTableSkeleton.tsx`

**Files Modified**: 1
- `/home/pbrown/SkuInventory/src/app/(dashboard)/skus/page.tsx` (add import, update Suspense fallback)

## Handoff to Build Agent
1. Execute subtasks in exact order (1.1 -> 2.1 -> 3.1)
2. Ensure Phase 1 component compiles before Phase 2 modifications
3. Test completion criteria before next subtask
4. Follow reference patterns exactly from `/home/pbrown/SkuInventory/src/app/(dashboard)/loading.tsx`

## Test Strategy Note
- This is a visual enhancement with no business logic changes
- FAST_PATH testing: Visual verification only
- No unit tests required for static skeleton component

## Out of Scope (Future Enhancement)
The following pages also use generic `<div>Loading...</div>` fallbacks and could benefit from similar skeleton loaders:
- `/home/pbrown/SkuInventory/src/app/(dashboard)/components/page.tsx` - ComponentTable skeleton
- `/home/pbrown/SkuInventory/src/app/(dashboard)/lots/page.tsx` - LotTable skeleton
- `/home/pbrown/SkuInventory/src/app/(dashboard)/transactions/page.tsx` - Transaction skeleton

These should be addressed in separate issues to keep scope manageable.

## Performance Metrics
| Phase | Duration |
|-------|----------|
| Investigation | 5m |
| Validation | 2m |
| Planning | 8m |
| **Total** | **15m** |
