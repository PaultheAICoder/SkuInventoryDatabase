# Implementation Plan
**Generated**: 2025-12-04 04:30 UTC
**Generated By**: Scout-and-Plan Agent (combined workflow)
**Task ID**: GitHub Issue #73 - Phase 6: Per-location UI views, filters, and breakdowns
**Estimated Build Time**: 12-16 hours
**Complexity**: High

## Investigation Summary

### Request Analysis
**Type**: Feature Enhancement
**Source**: GitHub Issue #73
**Priority**: High (Part of Multi-location Feature - Parent #9, Phase 6 of 7)
**Dependencies**: Issue #72 (Phase 5 - Finished goods) - CLOSED

### Task Classification
**Category**: NEW_FEATURE
**Test Strategy**: TARGETED (affected modules)
**Suggested Filter**: None - UI-heavy feature requires manual testing

### Issue Validation
**Status**: Valid - All prerequisite phases (1-5) are closed
**Recent Changes**:
- f808e51 feat(issue #70): add location-aware inventory quantity queries
- dbdc5e0 feat(issue #96): update data queries to scope by selected company
- d68c193 feat(issue #87): add company selector component to sidebar

### Current State Assessment

**Backend Infrastructure (COMPLETE - from Phases 1-5)**:
- Location model exists in Prisma schema with `LocationType` enum
- `getComponentQuantities()` supports optional `locationId` parameter
- `getComponentQuantity()` supports optional `locationId` parameter
- `calculateMaxBuildableUnitsForSKUs()` supports optional `locationId` parameter
- `getSkuQuantities()` and `getSkuQuantity()` support location filtering
- `getSkuInventorySummary()` returns per-location breakdown
- Dashboard API `/api/dashboard` already accepts `locationId` query param
- Components API `/api/components` already passes `locationId` to data layer
- Export API `/api/export/components` already accepts `locationId` query param
- Transactions API already includes `location`, `fromLocation`, `toLocation` fields

**Frontend (NEEDS IMPLEMENTATION)**:
- Components page (`src/app/(dashboard)/components/page.tsx`): Has `locationId` in search params, passes to API, but **NO location filter UI**
- SKUs page (`src/app/(dashboard)/skus/page.tsx`): Has `locationId` in search params, but **NO location filter UI**
- Dashboard page (`src/app/(dashboard)/page.tsx`): **NO location filter UI**, API supports it
- Component detail page: **NO per-location breakdown table**
- SKU detail page: Shows finished goods by location but **needs enhancement for component inventory breakdown**
- Transactions page: **NO location filter**, shows location but not prominent
- ComponentTable: **NO expandable per-location breakdown**
- SKUTable: **NO per-location finished goods breakdown**

**UI Components to Create**:
- `LocationFilter.tsx` - Reusable location dropdown filter
- `InventoryByLocationTable.tsx` - Per-location inventory breakdown table

### Dependencies & Blockers
1. Location API (`/api/locations`) requires admin role - need read-only endpoint for filters
2. All backend infrastructure is in place from previous phases

**Can Proceed?**: YES (with new read-only locations endpoint)

### Complexity Assessment
**Complexity**: High
**Effort**: 12-16 hours
**Risk**: Medium - UI-heavy work with many files, but patterns well established

### Patterns Identified
**Primary Pattern**: `src/components/features/CompanySelector.tsx` (lines 1-89)
- Client-side selector component with session-based data
- Uses shadcn/ui Select component
- Handles loading state with disabled prop

**Secondary Pattern**: `src/components/features/ComponentTable.tsx` (lines 121-153)
- Filter dropdowns using shadcn/ui Select
- URL-based filter state with `useSearchParams`
- `updateFilters()` helper for URL manipulation

**Tertiary Pattern**: SKU detail page finished goods display (lines 180-196)
- Location breakdown display pattern already implemented

### Ripple Effect Analysis
**Files to Modify**: 15
**Files to Create**: 3

**UI Pages (5)**:
- `src/app/(dashboard)/components/page.tsx` - Add location filter dropdown
- `src/app/(dashboard)/skus/page.tsx` - Add location filter dropdown
- `src/app/(dashboard)/page.tsx` - Add location filter dropdown
- `src/app/(dashboard)/components/[id]/page.tsx` - Add per-location inventory breakdown
- `src/app/(dashboard)/transactions/page.tsx` - Add location filter dropdown

**Feature Components (5)**:
- `src/components/features/ComponentTable.tsx` - Add location filter to UI
- `src/components/features/SKUTable.tsx` - Add location filter and FG breakdown
- `src/components/features/DashboardStats.tsx` - Location context display
- `src/components/features/CriticalComponentsList.tsx` - Show location shortage info
- `src/components/features/TopBuildableSkusList.tsx` - Location context display

**New Components (2)**:
- `src/components/features/LocationFilter.tsx` - Reusable location dropdown
- `src/components/features/InventoryByLocationTable.tsx` - Per-location breakdown table

**API Routes (1)**:
- `src/app/api/locations/route.ts` - Add read-only GET for non-admin users

**Export (1)**:
- `src/components/features/ExportButton.tsx` - Pass locationId to export URL

**Types (1)**:
- `src/types/component.ts` - Add `locationQuantities` to response type

---

## Executive Summary
This phase adds comprehensive location-aware UI filters and per-location inventory breakdowns across all major views. The backend infrastructure is complete from previous phases - this is primarily frontend work. The main deliverables are a reusable `LocationFilter` component, a `InventoryByLocationTable` for displaying per-location quantities, and integration of location filtering across the Components, SKUs, Dashboard, and Transactions pages.

---

## Phase 0: Infrastructure Preparation

### Subtask 0.1: Add Read-Only Locations Endpoint for Non-Admin Users
**File**: `/home/pbrown/SkuInventory/src/app/api/locations/route.ts`
**Pattern**: Follow existing GET handler pattern but allow all authenticated users
**Instructions**:
1. Modify the GET handler to allow `ops` and `viewer` roles (not just admin) for read-only access
2. Keep admin-only restriction for POST/create operations
3. Return active locations only for non-admin users

**Code Change**:
```typescript
// Line 17-19: Change role check for GET only
// Before:
if (session.user.role !== 'admin') {
  return NextResponse.json({ error: 'Forbidden' }, { status: 403 })
}

// After:
// No role check for GET - all authenticated users can read locations
// Admin check moved to POST only
```

**Validation**:
```bash
npx tsc --noEmit
```

**Completion Criteria**:
- [ ] All authenticated users can call GET /api/locations
- [ ] Only admins can call POST /api/locations
- [ ] TypeScript compiles without errors

---

## Phase 1: Create Reusable Components

### Subtask 1.1: Create LocationFilter Component
**File**: `/home/pbrown/SkuInventory/src/components/features/LocationFilter.tsx`
**Pattern**: Follow `src/components/features/CompanySelector.tsx` and `src/components/features/ComponentTable.tsx` filter pattern
**Instructions**:
1. Create a client component that fetches locations from `/api/locations`
2. Use shadcn/ui Select component
3. Support "All Locations" option with undefined/empty value
4. Accept `value` and `onValueChange` props for controlled behavior
5. Support optional `className` prop for layout flexibility
6. Handle loading and error states
7. Cache locations in component state to avoid refetching

**Props Interface**:
```typescript
interface LocationFilterProps {
  value?: string  // undefined = "All Locations"
  onValueChange: (locationId: string | undefined) => void
  className?: string
  disabled?: boolean
}
```

**Implementation Notes**:
- Fetch locations on mount using useEffect
- Show loading skeleton while fetching
- Include "All Locations" as first option
- Use MapPin icon from lucide-react

**Validation**:
```bash
npx tsc --noEmit
npm run lint
```

**Completion Criteria**:
- [ ] Component renders location dropdown
- [ ] "All Locations" option shows and works
- [ ] Value change callback fires correctly
- [ ] Loading state displays
- [ ] TypeScript compiles without errors

### Subtask 1.2: Create InventoryByLocationTable Component
**File**: `/home/pbrown/SkuInventory/src/components/features/InventoryByLocationTable.tsx`
**Pattern**: Follow `src/components/features/CriticalComponentsList.tsx` table pattern
**Instructions**:
1. Create component that displays quantity per location
2. Accept data as prop (array of location quantities)
3. Show total row if multiple locations
4. Support empty state
5. Use Card wrapper with title

**Props Interface**:
```typescript
interface LocationQuantity {
  locationId: string
  locationName: string
  locationType?: string
  quantity: number
}

interface InventoryByLocationTableProps {
  title?: string
  data: LocationQuantity[]
  totalLabel?: string  // e.g., "Total On Hand" or "Total Finished Goods"
  emptyMessage?: string
}
```

**Validation**:
```bash
npx tsc --noEmit
npm run lint
```

**Completion Criteria**:
- [ ] Component renders location breakdown table
- [ ] Total row displays when multiple locations
- [ ] Empty state displays when no data
- [ ] TypeScript compiles without errors

---

## Phase 2: Update Types and API Response Enhancement

### Subtask 2.1: Add LocationQuantities to Component Response Type
**File**: `/home/pbrown/SkuInventory/src/types/component.ts`
**Pattern**: Follow existing response type patterns
**Instructions**:
1. Add optional `locationQuantities` array to `ComponentResponse`
2. Add interface for location quantity items

**Code Addition** (after line 69):
```typescript
// Location quantity breakdown
export interface ComponentLocationQuantity {
  locationId: string
  locationName: string
  locationType?: string
  quantity: number
}

// Update ComponentResponse to include optional locationQuantities
// Add to existing interface:
locationQuantities?: ComponentLocationQuantity[]
```

**Validation**:
```bash
npx tsc --noEmit
```

**Completion Criteria**:
- [ ] `ComponentLocationQuantity` interface added
- [ ] `ComponentResponse` includes optional `locationQuantities`
- [ ] TypeScript compiles without errors

### Subtask 2.2: Update Component API to Return Per-Location Breakdown
**File**: `/home/pbrown/SkuInventory/src/app/api/components/[id]/route.ts`
**Pattern**: Follow existing API response patterns
**Instructions**:
1. Add new service function to get component quantities by all locations
2. Include `locationQuantities` in detail response when relevant
3. Do NOT change list endpoint (too much data for table view)

**Implementation Notes**:
- Create helper function `getComponentQuantitiesByLocation(componentId: string, companyId: string)`
- Query FinishedGoodsLine or TransactionLine grouped by location
- Return array of `{ locationId, locationName, locationType, quantity }`

**Validation**:
```bash
npx tsc --noEmit
npm run build
```

**Completion Criteria**:
- [ ] Component detail API returns `locationQuantities` array
- [ ] Location names and types included
- [ ] API still works without breaking existing consumers

---

## Phase 3: Update Dashboard UI

### Subtask 3.1: Add Location Filter to Dashboard Page
**File**: `/home/pbrown/SkuInventory/src/app/(dashboard)/page.tsx`
**Pattern**: Follow existing DashboardTimeFilter placement
**Instructions**:
1. Import and add `LocationFilter` component
2. Add `locationId` state
3. Pass `locationId` to API call URL
4. Place filter next to time filter in header

**Code Changes**:
1. Add state: `const [locationId, setLocationId] = useState<string | undefined>(undefined)`
2. Update fetch URL: `const url = /api/dashboard?days=${timeFilter}${locationId ? &locationId=${locationId} : ''}`
3. Add LocationFilter to header div

**Validation**:
```bash
npm run build
```

**Completion Criteria**:
- [ ] Location filter appears in dashboard header
- [ ] Selecting location filters dashboard data
- [ ] "All Locations" shows aggregated data
- [ ] Build passes without errors

### Subtask 3.2: Update DashboardStats for Location Context
**File**: `/home/pbrown/SkuInventory/src/components/features/DashboardStats.tsx`
**Pattern**: Existing stats card layout
**Instructions**:
1. Optionally show "at [Location Name]" subtitle when filtered
2. Accept optional `locationName` prop

**Code Changes**:
```typescript
interface DashboardStatsProps {
  stats: { total: number; critical: number; warning: number; ok: number }
  locationName?: string  // Add this
}
// In subtitle text: show "Active inventory items at {locationName}" when filtered
```

**Validation**:
```bash
npx tsc --noEmit
```

**Completion Criteria**:
- [ ] Stats show location context when filtered
- [ ] Shows "Active inventory items" when all locations
- [ ] TypeScript compiles without errors

### Subtask 3.3: Update CriticalComponentsList for Location Awareness
**File**: `/home/pbrown/SkuInventory/src/components/features/CriticalComponentsList.tsx`
**Pattern**: Existing table layout
**Instructions**:
1. Add optional `locationName` prop to show which location has shortage
2. Update card description to reflect location filter

**Validation**:
```bash
npx tsc --noEmit
```

**Completion Criteria**:
- [ ] Component indicates when showing location-specific data
- [ ] TypeScript compiles without errors

### Subtask 3.4: Update TopBuildableSkusList for Location Awareness
**File**: `/home/pbrown/SkuInventory/src/components/features/TopBuildableSkusList.tsx`
**Pattern**: Existing table layout
**Instructions**:
1. Add optional `locationName` prop to show location context
2. Update card description to reflect location filter

**Validation**:
```bash
npx tsc --noEmit
```

**Completion Criteria**:
- [ ] Component indicates when showing location-specific data
- [ ] TypeScript compiles without errors

---

## Phase 4: Update Components Page UI

### Subtask 4.1: Add Location Filter to Components Page
**File**: `/home/pbrown/SkuInventory/src/app/(dashboard)/components/page.tsx`
**Pattern**: Existing filter pattern in ComponentTable
**Instructions**:
1. The page already extracts `locationId` from searchParams (line 23)
2. Already passes `locationId` to `getComponents()` (line 182)
3. Need to pass `locationId` to ComponentTable so it can render the filter

**Code Changes**:
1. Pass `locationId` prop to ComponentTable: `<ComponentTable ... locationId={params.locationId} />`

**Validation**:
```bash
npm run build
```

**Completion Criteria**:
- [ ] LocationId passed to ComponentTable
- [ ] Build passes

### Subtask 4.2: Add Location Filter UI to ComponentTable
**File**: `/home/pbrown/SkuInventory/src/components/features/ComponentTable.tsx`
**Pattern**: Existing category/status filter pattern (lines 121-153)
**Instructions**:
1. Import LocationFilter component
2. Accept `locationId` prop
3. Add LocationFilter to filter row (after reorderStatus filter)
4. Wire up `updateFilters({ locationId })` on change

**Code Changes**:
```typescript
interface ComponentTableProps {
  components: ComponentResponse[]
  total: number
  page: number
  pageSize: number
  locationId?: string  // Add this
}
```

**Validation**:
```bash
npx tsc --noEmit
npm run build
```

**Completion Criteria**:
- [ ] Location filter dropdown appears in ComponentTable
- [ ] Selecting location updates URL params
- [ ] Data filters by location
- [ ] Build passes without errors

---

## Phase 5: Update SKUs Page UI

### Subtask 5.1: Pass LocationId to SKUTable
**File**: `/home/pbrown/SkuInventory/src/app/(dashboard)/skus/page.tsx`
**Pattern**: Follow components page pattern
**Instructions**:
1. Page already extracts `locationId` (line 21)
2. Already passes to `getSKUs()` (line 31)
3. Pass `locationId` prop to SKUTable

**Code Changes**:
```typescript
<SKUTable
  skus={skus}
  total={meta.total}
  page={meta.page}
  pageSize={meta.pageSize}
  locationId={params.locationId}  // Add this
/>
```

**Validation**:
```bash
npm run build
```

**Completion Criteria**:
- [ ] LocationId passed to SKUTable
- [ ] Build passes

### Subtask 5.2: Add Location Filter UI to SKUTable
**File**: `/home/pbrown/SkuInventory/src/components/features/SKUTable.tsx`
**Pattern**: Follow ComponentTable filter implementation
**Instructions**:
1. Import LocationFilter component
2. Accept `locationId` prop
3. Add LocationFilter to filter row
4. Wire up URL param update

**Code Changes**:
```typescript
interface SKUTableProps {
  skus: SKUResponse[]
  total: number
  page: number
  pageSize: number
  locationId?: string  // Add this
}
```

**Validation**:
```bash
npx tsc --noEmit
npm run build
```

**Completion Criteria**:
- [ ] Location filter dropdown appears in SKUTable
- [ ] Selecting location updates URL params
- [ ] Build passes without errors

---

## Phase 6: Update Detail Pages

### Subtask 6.1: Add Per-Location Breakdown to Component Detail Page
**File**: `/home/pbrown/SkuInventory/src/app/(dashboard)/components/[id]/page.tsx`
**Pattern**: Follow existing card layout pattern
**Instructions**:
1. Import InventoryByLocationTable component
2. Add new API endpoint or enhance existing to return locationQuantities
3. Add new Card section showing inventory by location
4. Place after Inventory card (around line 185)

**Implementation Notes**:
- Component API (`/api/components/[id]`) needs to return `locationQuantities`
- Add new section only if `locationQuantities` has data

**Code Addition** (after Inventory Card, around line 235):
```tsx
{/* Per-Location Inventory */}
{component.locationQuantities && component.locationQuantities.length > 1 && (
  <InventoryByLocationTable
    title="Inventory by Location"
    data={component.locationQuantities}
    totalLabel="Total On Hand"
  />
)}
```

**Validation**:
```bash
npm run build
```

**Completion Criteria**:
- [ ] Per-location inventory table shows on component detail
- [ ] Only shows when multiple locations have inventory
- [ ] Build passes without errors

### Subtask 6.2: Enhance SKU Detail Page Finished Goods Display
**File**: `/home/pbrown/SkuInventory/src/app/(dashboard)/skus/[id]/page.tsx`
**Pattern**: Existing finished goods display (lines 180-196)
**Instructions**:
1. The page already shows finished goods by location (lines 180-196)
2. Extract into InventoryByLocationTable component for consistency
3. Add "Buildable by Location" section if relevant

**Implementation Notes**:
- The SKU detail API already returns `finishedGoodsInventory.byLocation`
- Use InventoryByLocationTable instead of inline display

**Validation**:
```bash
npm run build
```

**Completion Criteria**:
- [ ] Finished goods use consistent InventoryByLocationTable component
- [ ] Build passes without errors

---

## Phase 7: Update Transactions Page

### Subtask 7.1: Add Location Filter to Transactions Page
**File**: `/home/pbrown/SkuInventory/src/app/(dashboard)/transactions/page.tsx`
**Pattern**: Existing filter pattern (lines 181-256)
**Instructions**:
1. Import LocationFilter component
2. Add `locationId` to filters state
3. Add LocationFilter to filter row
4. Pass locationId to API call
5. Update transaction list query schema to support locationId

**Code Changes**:
1. Add to filters state: `locationId: searchParams.get('locationId') ?? ''`
2. Add LocationFilter in filter section
3. Update API params: `if (filters.locationId) params.set('locationId', filters.locationId)`

**Validation**:
```bash
npm run build
```

**Completion Criteria**:
- [ ] Location filter appears on transactions page
- [ ] Selecting location filters transactions
- [ ] Build passes without errors

### Subtask 7.2: Update Transaction List Query Schema
**File**: `/home/pbrown/SkuInventory/src/types/transaction.ts`
**Pattern**: Existing query schema (lines 91-104)
**Instructions**:
1. Add `locationId` field to `transactionListQuerySchema`

**Code Change** (add after line 99):
```typescript
locationId: z.string().uuid().optional(),
```

**Validation**:
```bash
npx tsc --noEmit
```

**Completion Criteria**:
- [ ] Schema accepts locationId parameter
- [ ] TypeScript compiles without errors

### Subtask 7.3: Update Transaction API to Filter by Location
**File**: `/home/pbrown/SkuInventory/src/app/api/transactions/route.ts`
**Pattern**: Existing filter pattern (lines 28-46)
**Instructions**:
1. Extract locationId from query params
2. Add to where clause - filter by locationId OR fromLocationId OR toLocationId

**Code Change**:
```typescript
// Add to where clause
...(locationId && {
  OR: [
    { locationId },
    { fromLocationId: locationId },
    { toLocationId: locationId },
  ],
}),
```

**Validation**:
```bash
npm run build
```

**Completion Criteria**:
- [ ] API filters transactions by location
- [ ] Transfers show when either from or to location matches
- [ ] Build passes without errors

### Subtask 7.4: Enhance Transaction List Location Display
**File**: `/home/pbrown/SkuInventory/src/app/(dashboard)/transactions/page.tsx`
**Pattern**: Existing table columns
**Instructions**:
1. Add "Location" column to transaction table
2. Show location name (or "From -> To" for transfers)
3. Make location column visible but not too wide

**Code Changes**:
1. Add TableHead for "Location"
2. Add TableCell with conditional display based on transaction type

**Validation**:
```bash
npm run build
```

**Completion Criteria**:
- [ ] Location column shows in transaction table
- [ ] Transfers show "From -> To" format
- [ ] Build passes without errors

---

## Phase 8: Update Export Functionality

### Subtask 8.1: Pass LocationId to Export URL
**File**: `/home/pbrown/SkuInventory/src/components/features/ExportButton.tsx`
**Pattern**: Existing queryParams pattern
**Instructions**:
1. Check if component already accepts queryParams
2. Ensure locationId can be passed through to export URL
3. Update Components page to pass locationId to ExportButton

**Validation**:
```bash
npm run build
```

**Completion Criteria**:
- [ ] Export respects location filter
- [ ] Build passes without errors

---

## Phase 9: Final Validation

### Subtask 9.1: Run Full Build and TypeScript Check
**Instructions**:
```bash
npm run build
npx tsc --noEmit
npm run lint
```

**Completion Criteria**:
- [ ] `npm run build` passes without errors
- [ ] `npx tsc --noEmit` passes without errors
- [ ] `npm run lint` passes without errors/warnings

### Subtask 9.2: Manual Testing Checklist
**Instructions**: Verify each acceptance criteria from the issue

**Completion Criteria**:
- [ ] LocationFilter component created and reusable
- [ ] Components page has location filter
- [ ] ComponentTable shows per-location breakdown on detail page
- [ ] SKUs page has location filter
- [ ] SKUTable shows finished goods by location
- [ ] Dashboard has location filter
- [ ] Dashboard stats filter by selected location
- [ ] Critical components list is location-aware
- [ ] Top buildable SKUs list is location-aware
- [ ] Component detail page shows inventory by location
- [ ] SKU detail page shows finished goods by location
- [ ] Transactions page can filter by location
- [ ] Transaction list shows location column
- [ ] Component export includes location data
- [ ] "All Locations" option shows aggregated totals
- [ ] UI is responsive and works on mobile

---

## Summary of Deliverables

**Files Created**: 2
- `/home/pbrown/SkuInventory/src/components/features/LocationFilter.tsx`
- `/home/pbrown/SkuInventory/src/components/features/InventoryByLocationTable.tsx`

**Files Modified**: 14
- `/home/pbrown/SkuInventory/src/app/api/locations/route.ts` - Allow read-only access
- `/home/pbrown/SkuInventory/src/types/component.ts` - Add locationQuantities type
- `/home/pbrown/SkuInventory/src/types/transaction.ts` - Add locationId to query schema
- `/home/pbrown/SkuInventory/src/app/api/components/[id]/route.ts` - Return locationQuantities
- `/home/pbrown/SkuInventory/src/app/api/transactions/route.ts` - Filter by locationId
- `/home/pbrown/SkuInventory/src/app/(dashboard)/page.tsx` - Add location filter
- `/home/pbrown/SkuInventory/src/app/(dashboard)/components/page.tsx` - Pass locationId prop
- `/home/pbrown/SkuInventory/src/app/(dashboard)/skus/page.tsx` - Pass locationId prop
- `/home/pbrown/SkuInventory/src/app/(dashboard)/components/[id]/page.tsx` - Add location breakdown
- `/home/pbrown/SkuInventory/src/app/(dashboard)/skus/[id]/page.tsx` - Use consistent component
- `/home/pbrown/SkuInventory/src/app/(dashboard)/transactions/page.tsx` - Add location filter/column
- `/home/pbrown/SkuInventory/src/components/features/ComponentTable.tsx` - Add location filter
- `/home/pbrown/SkuInventory/src/components/features/SKUTable.tsx` - Add location filter
- `/home/pbrown/SkuInventory/src/components/features/DashboardStats.tsx` - Location context
- `/home/pbrown/SkuInventory/src/components/features/CriticalComponentsList.tsx` - Location awareness
- `/home/pbrown/SkuInventory/src/components/features/TopBuildableSkusList.tsx` - Location awareness

## Handoff to Build Agent
1. Execute subtasks in exact order (Phase 0 -> Phase 9)
2. Complete Phase 0 (infrastructure) fully before Phase 1
3. Test completion criteria before moving to next subtask
4. Follow reference patterns exactly
5. Run `npm run build` and `npx tsc --noEmit` after each phase

## Test Strategy Note
- Use Vitest for unit tests (if adding any)
- Manual testing required for UI components
- Test responsive behavior on mobile viewport

## Performance Metrics
| Phase | Duration |
|-------|----------|
| Investigation | 35m |
| Validation | 10m |
| Planning | 20m |
| **Total** | **65m** |
