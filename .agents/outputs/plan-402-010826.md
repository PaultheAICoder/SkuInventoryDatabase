# Quick Fix Plan

**Issue**: #402 - Make +X more expandable in dashboard recent transactions
**Tier**: 1 (Quick Fix)
**Type**: UI/UX Enhancement
**Est. Time**: 30 minutes
**Generated**: 2026-01-08
**Generated By**: Scout-and-Plan Agent (combined workflow)

## The Fix

The dashboard already has expand/collapse functionality for transaction line items (added in issue #293 via commit cf4c747). However, the "+X more" text shown when a transaction has multiple lines is currently a non-interactive `<span>`. Users naturally expect to click on "+X more" to expand, but currently they must click the small chevron icon instead. The fix is to make the "+X more" text clickable by changing it from a `<span>` to a `<button>` that calls the existing `toggleExpand()` function.

## Investigation Summary

### Current State
- **File**: `src/app/(dashboard)/page.tsx`
- **Expand functionality**: Already implemented (lines 85-89, 212-226, 268-300)
- **Toggle function**: `toggleExpand(txId: string)` exists at line 87-89
- **Problem**: Lines 238-242 show "+X more" as a plain `<span>`, not clickable

### Issue Validation
- **Status**: Valid
- **Recent Changes**: Issue #293 (commit cf4c747) added the chevron expand button but not clickable "+X more" text

### Pattern Scan Results
Similar "+X more" patterns exist elsewhere in the codebase, but this issue specifically asks for the dashboard recent transactions fix only:
- `src/app/(dashboard)/transactions/page.tsx` (line 404) - different context, navigates to detail
- `src/components/features/ExpiryWarningBanner.tsx` (line 119) - links to lots page
- `src/components/integrations/asin-mapping-list.tsx` (line 270) - different UX pattern

**Decision**: Fix only the dashboard page as requested. Other instances can be addressed in separate issues if needed.

## Changes Required

| File | Line | Change |
|------|------|--------|
| `src/app/(dashboard)/page.tsx` | 238-241 | Change `<span>` to `<button>` with `onClick` handler |

### Detailed Change

**Before** (lines 238-242):
```tsx
{tx.lines.length > 1 && expandedTxId !== tx.id && (
  <span className="text-muted-foreground text-xs ml-1">
    +{tx.lines.length - 1} more
  </span>
)}
```

**After**:
```tsx
{tx.lines.length > 1 && expandedTxId !== tx.id && (
  <button
    onClick={(e) => {
      e.stopPropagation()
      toggleExpand(tx.id)
    }}
    className="text-muted-foreground text-xs ml-1 hover:text-foreground hover:underline cursor-pointer"
  >
    +{tx.lines.length - 1} more
  </button>
)}
```

### Key Implementation Notes
1. Use `<button>` element for accessibility (keyboard navigable, semantically correct)
2. Add `e.stopPropagation()` to prevent row click events (consistent with existing chevron button pattern on line 215-216)
3. Add hover styles (`hover:text-foreground hover:underline`) to indicate interactivity
4. Add `cursor-pointer` for visual affordance
5. Reuse the existing `toggleExpand(tx.id)` function - no new state management needed

## Validation

- [ ] `npm run build` passes
- [ ] `npm run lint` passes
- [ ] `npx tsc --noEmit` passes
- [ ] Manual test: Click "+X more" on dashboard expands transaction lines
- [ ] Manual test: Individual component links still work
- [ ] Manual test: Chevron button still works for expand/collapse
- [ ] Manual test: Expanded view can be collapsed by clicking chevron

## Acceptance Criteria (from issue)
- [x] "+X more" is clickable (after fix)
- [x] Clicking expands to show all line items (uses existing expand logic)
- [x] Individual items still link to their detail pages (unchanged)
- [x] Works for all transaction types (uses same code path)

## Files Summary

**Created**: 0
**Modified**: 1 - `src/app/(dashboard)/page.tsx`

## Performance Metrics
| Phase | Duration |
|-------|----------|
| Investigation | 5m |
| Validation | 2m |
| Planning | 3m |
| **Total** | **10m** |
